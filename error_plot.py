import pandas as pd
import matplotlib.pyplot as plt
import numpy


def main():
    # setup the dataframe
    Delay = ['0', '5', '10', '15', '20', '25']
    list_measure = []
    # mse_1=[14.544647937782672, 15.42414458560125, 16.305432685183483, 17.103967261116637, 18.198931067977792, 15.687658087662427, 15.843145926253975, 16.06596428632123, 15.50360609689935, 14.068066401999907, 15.930497972548158, 16.51372680760362, 18.13500582055727, 14.240192985638235, 14.375063099934094, 14.550536710084156, 16.416951399811627, 16.047472897182708, 16.50176567363508, 15.046100932002409, 14.221200475379291, 16.126501315735553, 13.787514455295184, 15.925380508641023, 15.81085901098365, 14.462879916133211, 13.220469364891894, 15.436999193262727, 15.15682162801243, 17.419039038779534, 17.965056903435492, 16.949854095500584, 15.094443689298705, 15.523316167964278, 13.168686739128447, 15.770517752471303, 15.91211067804186, 15.1346968411934, 14.506824787394622, 16.873101410579498, 17.778236807699958, 14.058902359941424, 16.18325307764748, 15.900489790289148, 13.45036701772983, 14.789605346763656, 15.430757622004364, 14.243685313067786, 15.167615201798824, 15.029414630384942]   
    # mse_6=[14.430526515252302, 14.07506542637705, 14.294808010353496, 14.510727762217487, 13.103113020838673, 13.763516304733132, 13.142831261872596,  13.510304938090506, 14.155943130654554, 13.455784807034382, 13.572488178066626, 13.054869882937032, 14.248206568266726, 13.839452587997716, 13.300609184217379,  13.917918040247853, 15.047950887989, 14.2654291313363, 14.195948869641024, 14.053591278556059, 14.465822421260373, 14.953041648126817, 15.249656034552808,   13.81209289502283, 12.930708723268765, 13.969385412184376, 13.9628974152018, 13.8271831786321, 12.105188488236099, 13.914685525701117, 14.062390004790435,    13.963856663862265, 14.546426046719567, 14.345854409831908, 14.724734671008118, 13.477381045104654, 13.47111674003304, 13.89422066264987, 14.0888426924974,    14.3620984961537, 13.948110959833276, 12.21094473625856, 13.156186401216686, 14.18329129106211, 13.027795982852068, 13.127031820105772, 13.752321563464442,    15.016119165689052, 14.342064642943958, 14.162457372866086]    
    # mse_11=[12.546138752492478, 13.546491057181628, 13.959369648426794, 13.898635218473801, 14.010946291417275, 12.966616584769774, 15.152064892708328,     13.73629468399791, 13.146791557700647, 13.348995096277285, 14.486412233465934, 12.4471584608222, 13.628552078772959, 13.74850900710638, 12.913839743815986,     13.38898405668651, 14.328948283603795, 13.048853561047032, 14.294536776605934, 14.085418197415585, 13.717986737302123, 13.236056766767105, 12.653839798773829,  13.625921032892988, 12.824662252249391, 14.038372942913943, 13.3047025563893, 13.651590378715122, 13.928093267855415, 12.401332047894307, 14.319139533955786,    13.463150573913046, 12.876193933670518, 13.239876830353213, 13.848085855690144, 12.11401033456539, 13.919198125247906, 13.220947163063126, 13.370351585081714,     12.870287401461441, 13.76817176829421, 12.448621199345112, 14.261077591802293, 14.30238047995453, 13.850693973540936, 13.540256873798722, 14.615502698572111,   14.106683340808855, 13.135063343085934, 14.312701173745424]   
    # mse_16=[12.803303285842151, 13.954965225384143, 12.946679738963185, 12.952513649852467, 13.70482852092463, 13.626894774062771, 13.347456424797867,     13.58733552341684, 14.00167092189553, 13.88557788621136, 13.32943565995212, 13.795664801214405, 13.523605178101288, 14.657716188754778, 12.60659857207342,  12.44089594407825, 14.111277909908205, 13.318278018235967, 13.492373743354104, 14.034904413774397, 13.059043524264313, 13.679005702482344, 13.50290458511204,    13.038623643345172, 13.507984634235942, 13.164417353092228, 13.095979060348268, 14.109910604598738, 12.841469301401728, 13.790906810130231, 12.982803263874095,    13.292638855335406, 13.203164619352972, 13.581655069651909, 13.766423369732513, 14.061468460548408, 13.87571509888474, 14.06980189017763, 13.959631607146923,  14.31224645103233, 13.591257005644712, 13.893736570918646, 13.091944271459386, 13.736336165426705, 13.799407354757442, 13.612825868208986, 13.629482000065028,   14.323700183914703, 13.794047092853173, 13.695331275287321]   
    # mse_21=[12.726512997972923, 13.977205049039496, 12.644262372228265, 13.324195969102814, 12.45151531043916, 13.623016135537616, 13.983985634360781,     13.636872094765861, 13.532789115904082, 13.24061810051788, 13.912794769165503, 13.8473359652433, 12.594063352759807, 13.366036013510648, 13.613142098496324,    13.599391368266316, 12.054251267278001, 12.876456996651651, 12.705213456367083, 12.542065687724765, 13.868469819203066, 13.463834501546172, 12.808252707423083,    12.999303090306054, 12.969718948185289, 12.367390429683535, 12.996927000304943, 13.372950203881095, 13.126990516366135, 13.726981289621216, 13.100650593571332,    13.073762691291535, 12.751028573992592, 13.707413916821823, 13.272940435061685, 13.907793599509874, 12.814213548708786, 13.712245501713902, 13.995179489544451,    13.084000421757187, 13.454175401724477, 13.717813751241277, 14.051368465026107, 13.432142551892628, 13.645747548995145, 13.973300390124416, 14.085612583101506,    12.918933447789872, 13.953092658754322, 13.195481513859145]    
    # mse_26=[13.372253038843274, 13.98190939133158, 12.70255950800782, 12.629603991343862, 13.596853353169681, 13.141959136255464, 13.130627376903497,   12.557346531120684, 13.181941820402155, 13.536624273057878, 13.710123970202543, 12.88919560071416, 13.709470887119682, 13.120275016615269, 12.911224758206508,    13.072873804012419, 13.089406155891712, 14.438408919351087, 11.200155642124992, 12.787181620529564, 12.833027525230975, 13.22346658595767, 13.111276704314282,     11.764339400391282, 13.207645003396369, 12.728291501406144, 13.891363776128982, 13.520481537630069, 12.733872817180949, 12.722315233566862, 12.887243420673235,     13.451666664949466, 13.224631938974976, 13.046887885470976, 13.398965922721606, 12.71426527973812, 13.366906373611242, 12.73829066946419, 11.854891208378625,   13.181475601529158, 12.71449604601965, 14.024856612167403, 12.067465264530838, 13.68118307682158, 11.858787494542744, 13.631570062478023, 14.077996648288535, 13.31241550556939, 13.486136880192268, 12.205295226009678]
    
    list_measure.append([16.16678071615874, 19.568350912199143, 20.474476759883146, 22.7759325194351, 18.23504120595656, 16.041734777885527, 21.06881415574349, 16.157826947937664,21.21275177482709, 18.637799816125945, 18.65710064003552, 18.2429217211343, 19.03877877623803, 18.949728159472393, 15.617845692011356, 20.158167539553094, 18.91628873340845, 19.787588761657247, 18.989525861646484, 20.391905482896743, 19.503035151773663, 17.970059704366207, 17.370003207469196, 14.949926117237226, 19.762843362047477, 20.101641899811636, 19.905052177379417, 18.179729235217884, 19.347431832053683, 18.506635240546224, 21.809209648381216, 14.309144872866908, 16.02858487929738, 17.394252217518403, 21.88041332594632, 20.07839406605233, 17.138795768220103, 15.7240082285917, 13.991701563864744, 18.08358687247814, 17.347893600213865, 18.305525010129916, 21.2259370676001, 14.84026395013292, 20.77174180065748, 19.832087499332413, 18.25514631158071, 18.795372662636712, 20.341520606482327, 18.17576157965021])
    list_measure.append([15.585446696591008, 15.730007195969943, 16.55660584689679, 15.749398401837414, 15.048757096787815, 15.6709625214463, 16.53235211874385, 16.771917327904763, 15.821665731568151, 16.439592663020814, 15.807085876546203, 17.085914199849686, 15.832914303980223, 17.343044465489744, 16.558095174283388, 16.837312457260154, 14.761286127178053, 16.41222100139395, 17.139840871876903, 16.108933176496144, 15.812750048593633, 17.652161680747714, 15.684060272572125, 16.236142604849487, 16.016677281466997, 14.096124457656202, 16.462540382908312, 16.080344276293165, 17.310455467545115, 14.548851493885921, 16.371784435027553, 14.28604663508519, 14.857549870837857, 15.862496944891427, 15.586053481631053, 17.523287127817508, 15.663248001868011, 13.600355167681395, 17.27995407440018, 17.159683163996764, 15.848966950818705, 15.765730586311575, 17.504281093247084, 14.842193797700507, 15.51106133156284, 17.194054843603276, 15.332952319677862, 15.838046059761421, 16.555722489175153, 15.794240543723415])
    list_measure.append([17.54896447810212, 14.911883306905692, 15.206895103488845, 15.853527235706773, 14.17221421224718, 16.265846389921354, 15.822040452915846, 14.777010567987576, 14.157696974543063, 15.097772970730848, 14.297713762744044, 14.88511975052635, 15.714684908376595, 16.457018022821718, 15.930813384193867, 16.724140500809042, 15.540126197776722, 14.763478262679435, 15.594011575452493, 15.500060446292064, 15.341894230681097, 13.692173760524826, 15.783277835429349, 13.699733246010883, 17.587031007521308, 17.480923929167535, 15.39020106205621, 15.26449204448471, 15.709455048926465, 15.656245669523507, 15.93532746113034, 13.815637300109037, 16.60462349814734, 16.80537148243417, 16.561506615617553, 15.508926611420115, 16.449326862239857, 14.057374383349234, 13.976167402423567, 16.069491036544743, 14.968429268428878, 14.52451947567198, 15.121560510697428, 16.359758392616282, 14.880082347981634, 16.056904825664212, 13.822227719019752, 16.154663637491026, 16.171973015468076, 17.691297866316543])
    list_measure.append([15.8451723753362, 14.90774982008575, 16.389616116520656, 14.136860207014413, 15.951659876736716, 16.51966370593813, 14.734392806536421, 15.32258112098969, 15.27772924832801, 16.12187016355554, 15.603873708649765, 15.080812884176712, 14.497621542168575, 15.292766044816313, 14.346306248195702, 15.903332024547945, 15.31334781153751, 14.571667100189417, 15.497813109447469, 15.109913678759414, 16.004396825142184, 16.113502761450906, 13.702306990231, 14.667016596140616, 15.658878367994982, 15.87902288523386, 15.407371646148274, 15.344479703737981, 17.065804724444646, 16.335819532030662, 13.944104709295212, 15.730424077617576, 14.688412660296777, 15.811823238371561, 15.589065709207176, 14.799431420036813, 14.276478620208035, 16.287360950496243, 14.554966259126878, 14.999907463808295, 16.38934113685056, 14.873042969757828, 15.699493791001446, 14.396667700356138, 15.864967105963267, 15.483002796605957, 16.12013984737476, 15.272395324809754, 16.27648528653829, 15.8207302960875])
    list_measure.append([15.939223427178312, 15.933897607886875, 14.188745802260586, 14.793223761540595, 15.718615485802308, 15.56237120098761, 14.923494986662654, 14.880585560392069, 15.726330114926238, 16.15972053399162, 14.666139945864991, 15.902548579742858, 12.913006710713903, 14.517303786582366, 14.498604968836101, 15.421380734961616, 16.042592783749143, 16.218478543398387, 14.195048853935093, 15.265410534950679, 15.362779237824697, 14.603334313735985, 15.51284804674728, 15.266067695111927, 15.77664890105111, 15.6102668297382, 14.33844981668893, 16.85824095481647, 15.358378457884617, 14.782165558599166, 14.521842837426334, 15.740410387739681, 14.77063486775863, 14.206154073493197, 16.101714509462912, 15.168758172480956, 15.984629243371618, 15.625057559416957, 15.259210572349906, 14.702488400505949, 16.134467393125163, 14.59587806081283, 14.222917692566835, 15.385961413693398, 16.270529919087934, 14.02393409540655, 13.63182667613159, 15.479201952803134, 15.231350033694302, 15.627873746488055])
    list_measure.append([15.458507464177949, 13.700160180460426, 14.061007960048794, 14.326467802507699, 14.462544313245065, 14.625188953803892, 15.79578755274024, 14.70463451912038, 15.788831635985996, 14.411852512244844, 14.56821606675532, 15.639791716382016, 15.32160067470345, 16.195739022632775, 14.977376682562502, 15.961955383317665, 14.442432281085551, 14.365405397732758, 14.44201270596342, 14.652273732583781, 14.094402483583966, 13.394230869911965, 15.391903122335831, 15.899705263482662, 15.966017528177218, 15.990003247442752, 15.162018607838977, 16.242528073442386, 15.597885014524715, 14.044713760641963, 14.343794281321657, 14.093084630158335, 14.3904038499275, 14.501308369251518, 14.909958554843698, 16.189480812415933, 15.16543993205219, 14.17800461149803, 14.511632532531976, 14.103356618498745, 15.974994224633761, 15.230261441467576, 14.25462747897087, 14.475477199917949, 14.57238258296361, 14.56002935110107, 14.974834313258548, 15.112525468118719, 15.69879611555614, 14.602100497824463])

    mean = [numpy.mean(elm) for elm in list_measure]
    minimum = [numpy.amin(elm) for elm in list_measure]
    maximum = [numpy.amax(elm) for elm in list_measure]

    df = pd.DataFrame({'Delay':Delay,'Time':mean, 'Min': minimum, 'Max': maximum})
    df = (df.assign(yerr_min = df.Time-df.Min)
            .assign(yerr_max=df.Max-df.Time))


 
    plt.figure(figsize=(8, 6))
    plt.xlabel("Optimizaion steps")
    plt.ylabel("MSE")
    plt.suptitle("MSE minimum, average and maximum")
    plt.title("for given optimization steps")
    plt.bar(x='Delay', height='Time', yerr=df[['yerr_min', 'yerr_max']].T.values, capsize=10, data=df)
    plt.grid()
    plt.show()

if __name__ == "__main__":
    main()
